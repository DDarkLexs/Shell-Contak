<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="C:/Users/DDarkCoder/Documents/Laboratorio/javascript/desktop/Shell-Contak/src/database/database.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="browser pragmas query structure" current="2"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="3211"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,7:mainempresa"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="categoria" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="89"/><column index="2" value="48"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="cliente" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="70"/><column index="2" value="111"/><column index="3" value="145"/><column index="4" value="131"/><column index="5" value="139"/><column index="6" value="286"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="compra" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="75"/><column index="2" value="45"/><column index="3" value="104"/><column index="4" value="68"/><column index="5" value="165"/><column index="6" value="79"/><column index="7" value="106"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="empresa" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="83"/><column index="2" value="70"/><column index="3" value="372"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="fornecedor" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort><column index="7" mode="0"/></sort><column_widths><column index="1" value="99"/><column index="2" value="43"/><column index="3" value="62"/><column index="4" value="50"/><column index="5" value="120"/><column index="6" value="173"/><column index="7" value="149"/><column index="8" value="199"/><column index="9" value="75"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="funcionario" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="99"/><column index="2" value="117"/><column index="3" value="64"/><column index="4" value="165"/><column index="5" value="77"/><column index="6" value="94"/><column index="7" value="127"/><column index="11" value="192"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="notaCompra" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort><column index="3" mode="0"/></sort><column_widths><column index="1" value="106"/><column index="2" value="83"/><column index="3" value="126"/><column index="4" value="286"/><column index="5" value="165"/><column index="6" value="99"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="notaVenda" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="67"/><column index="2" value="41"/><column index="3" value="125"/><column index="4" value="86"/><column index="5" value="164"/><column index="6" value="190"/><column index="7" value="99"/><column index="8" value="70"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="produto" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="79"/><column index="2" value="153"/><column index="3" value="59"/><column index="4" value="45"/><column index="5" value="40"/><column index="6" value="40"/><column index="7" value="68"/><column index="8" value="41"/><column index="9" value="137"/><column index="10" value="141"/><column index="11" value="71"/><column index="12" value="70"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="sessao_log" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort><column index="2" mode="1"/></sort><column_widths><column index="1" value="72"/><column index="2" value="214"/><column index="3" value="99"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="sqlite_sequence" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="130"/><column index="2" value="208"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="usuario" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="75"/><column index="2" value="233"/><column index="3" value="80"/><column index="4" value="74"/><column index="5" value="250"/><column index="6" value="99"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="venda" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort><column index="5" mode="1"/></sort><column_widths><column index="1" value="96"/><column index="2" value="86"/><column index="3" value="201"/><column index="4" value="184"/><column index="5" value="219"/><column index="6" value="67"/><column index="7" value="117"/></column_widths><filter_values><column index="7" value="1"/></filter_values><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="drop">DROP TABLE IF EXISTS empresa ;
DROP TABLE IF EXISTS usuario;
DROP TABLE IF EXISTS sessao_log;
DROP TABLE IF EXISTS funcionario;

</sql><sql name="create">CREATE TABLE &quot;empresa&quot; (
	&quot;id_empresa&quot;	INTEGER NOT NULL,
	&quot;nome&quot;	TEXT NOT NULL,
	&quot;src&quot;	TEXT,
	&quot;nif&quot;	TEXT,
	&quot;email&quot;	TEXT,
	&quot;contato&quot;	TEXT DEFAULT +244,
	&quot;provincia&quot;	TEXT DEFAULT luanda,
	&quot;municipio&quot;	TEXT,
	&quot;endereco&quot;	TEXT,
	PRIMARY KEY(&quot;id_empresa&quot; AUTOINCREMENT));
	
	CREATE TABLE &quot;funcionario&quot; (
	&quot;id_funcionario&quot;	INTEGER NOT NULL,
	&quot;nome&quot;	TEXT NOT NULL UNIQUE,
	&quot;src&quot;	TEXT,
	&quot;sexo&quot;	TEXT NOT NULL DEFAULT masculino,
	&quot;nascimento&quot;	DATE NOT NULL,
	&quot;estadoCivil&quot;	TEXT,
	&quot;natural&quot;	TEXT,
	&quot;provincia_origem&quot;	TEXT,
	&quot;municipio&quot;	TEXT,
	&quot;residencia&quot; TEXT,
	&quot;endereco&quot;	TEXT,
	&quot;telefone&quot;	BLOB,
	&quot;datacad&quot;	DATETIME NOT NULL,
	&quot;id_empresa&quot;	INTEGER NOT NULL,
	FOREIGN KEY(&quot;id_empresa&quot;) REFERENCES &quot;empresa&quot;(&quot;id_empresa&quot;) ON DELETE CASCADE ON UPDATE CASCADE,
	PRIMARY KEY(&quot;id_funcionario&quot; AUTOINCREMENT));
	
	
CREATE TABLE sessao_log (
id_sessao INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
data DATETIME NOT NULL,
id_usuario INTEGER NOT NULL,
FOREIGN KEY(id_usuario) REFERENCES usuario(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE);

CREATE TABLE usuario (
id_usuario INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
senha TEXT NOT NULL,
role TEXT NOT NULL,
permissao BOOLEAN NOT NULL,
last_session DATETIME,
id_funcionario INTEGER NOT NULL,
FOREIGN KEY(id_funcionario) REFERENCES funcionario(id_funcionario) ON DELETE CASCADE ON UPDATE CASCADE);

</sql><sql name="event trigger functions">CREATE TRIGGER sessao_visto 
AFTER UPDATE OF last_session ON usuario
 BEGIN
	insert into sessao_log values (NULL, datetime('now'), new.id_usuario);
 END;</sql><current_tab id="0"/></tab_sql></sqlb_project>
